<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kick 4 Cash</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <style>
    body {
      margin: 0;
      background: url('assets/field-bg.png') no-repeat center center fixed;
      background-size: cover;
      font-family: sans-serif;
      color: white;
      text-align: center;
    }

    h1 {
      margin-top: 20px;
    }

    canvas {
      background: transparent;
      display: block;
      margin: 0 auto;
    }

    #kickButton {
      margin-top: 20px;
      padding: 12px 24px;
      font-size: 18px;
      background: #FD7D0D;
      color: black;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    #rewardArea a {
      display: inline-block;
      margin-top: 10px;
      background: #FD7D0D;
      color: #000;
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
    }

    #football {
      position: absolute;
      width: 40px;
      top: 180px;
      left: 180px;
      transition: transform 1s ease-out;
    }
  </style>
</head>
<body>
  <h1>Kick 4 Cash</h1>
  <canvas id="gameCanvas" width="400" height="200"></canvas>
  <img id="football" src="assets/football.png" alt="Football" />

  <button id="kickButton" onclick="kickBall()">Kick!</button>
  <p id="gameMsg"></p>
  <div id="rewardArea"></div>

  <script>
    let tries = localStorage.getItem('kick4cash-tries') || 0;
    let canvas = document.getElementById("gameCanvas");
    let ctx = canvas.getContext("2d");

    function resetFootballPosition() {
      const football = document.getElementById("football");
      football.style.transform = "translate(0, 0)";
    }

    function animateFootball() {
      const football = document.getElementById("football");
      football.style.transform = "translate(150px, -100px)";
    }

    function kickBall() {
      if (tries >= 2) {
        document.getElementById("gameMsg").innerText = "You've used all your kicks today. Come back tomorrow!";
        return;
      }

      animateFootball(); // üéØ Animate the football
      setTimeout(resetFootballPosition, 1500); // Reset after 1.5s

      let success = Math.random() > (tries === 0 ? 0 : 0.5);
      let reward = tries == 0 ? "$5 OFF ‚Äì KICK5" : "$10 OFF ‚Äì KICK10";
      let msg = success
        ? `üèà TOUCHDOWN! You scored ${reward}`
        : "Oof! Just missed. Come back tomorrow.";

      document.getElementById("gameMsg").innerText = msg;

      if (success) {
        confetti({
          particleCount: 150,
          spread: 70,
          origin: { y: 0.6 }
        });

        const couponCode = reward.includes("KICK5") ? "KICK5" : "KICK10";

        let rewardHTML = `
          <p style="font-size: 16px; margin-top: 10px;">
            Copy your code: <strong>${couponCode}</strong>
          </p>
        `;

        if (tries === 1) {
          rewardHTML += `
            <a href="#locker-room">Enter Locker Room</a>
          `;
        }

        document.getElementById("rewardArea").innerHTML = rewardHTML;
      }

      tries++;
      localStorage.setItem('kick4cash-tries', tries);
    }

    // Optional: draw something on canvas (just a placeholder)
    ctx.fillStyle = "rgba(255,255,255,0.1)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  </script>
</body>
</html>
